---
import { getCollection } from 'astro:content';
import Title from '../../../components/Title.astro';
import Layout from '../../../layouts/Layout.astro';
import ItemProfile from '../../../components/ItemProfile.astro';
const members = await getCollection('members') as {
    data: {
        title: string;
        members: {
            name: string;
            image: string;
            cvlac: string;
            orcid: string;
        }[];
    };
}[];
const categoryMembers = members.map(member => member.data.title) as string[];
---

<Layout title="IMPETUS INDOMITUS - Members" description="Members of the research group">
    <Title title="Members" />

    <header class="container max-w-screen-xl  mx-auto px-4 py-16 bg-white grid sm:grid-cols-1 md:grid-cols-2 items-center justify-center text-center gap-12">
        <div class="max-w-4xl mx-auto text-left">
            <h2 class="text-2xl font-bold text-gray-800 mb-8 text-center">Team Members</h2>
            <p class="text-lg text-gray-400 mb-8">
                The Impetus Indomitus team members embody a philosophy rooted in collaboration, respect, and humility. Each member contributes unique expertise which is joined by a shared commitment to serve the community. 
                <br><br>
                We work together to solve complex problems with innovative and revolutionary approaches emphasizing the importance of teamwork, valuing every contribution, and maintaining a spirit of humility as we strive to make a meaningful impact on society through our research and dedication.
            </p>
        </div>
        <div class="min-w-1/2 px-8">
            <img src="https://placehold.co/400x300" alt="Research Image" class="w-full h-auto rounded-lg mb-4">
        </div>
    </header>


    <div class="w-full bg-black border-b border-white py-4">
        <div class="container max-w-screen-xl mx-auto px-4 flex justify-center items-center gap-16" id="buttons">
            {categoryMembers.map(category=> (
                <button class="bg-white text-black px-4 py-2 rounded-2xl hover:bg-gray-200 border-1 hover:border-white">
                    {category}
                </button>
            ))}
        </div>
    </div>

    <section class="container max-w-screen-xl mx-auto my-4">
        <div class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 p-8 members">
            {members.map(membersCategory => (
               membersCategory.data.members.map(member => (
                    <ItemProfile
                        categoryId={membersCategory.data.title}
                        name={member.name}
                        image={member.image}
                        cvlac={member.cvlac}
                        orcid={member.orcid}
                    />
                ))
            ))}
        </div>
    </section>
</Layout>


<script>
  
    document.addEventListener("DOMContentLoaded", function () {
        const buttons = document.querySelectorAll("#buttons button") as NodeListOf<HTMLButtonElement>;
        const members = document.querySelectorAll(".members > .item-profile");
    
        buttons.forEach(button => {
        button.addEventListener("click", function () {
            const category = button.textContent?.trim() ?? "";
           
            buttons.forEach(btn => {
                btn.classList.remove("bg-black", "text-white", "hover:text-white" , "hover:bg-black");
                btn.classList.add("bg-white", "text-black", "border-white", "hover:bg-gray-200");
            });
            button.classList.remove("bg-white", "text-black", "hover:bg-gray-200", "border-white");
            button.classList.add("bg-black", "text-white", "hover:text-white" , "hover:bg-black");
    
            members.forEach(member => {
            if ((member as HTMLElement).dataset.category === category) {
                member.classList.remove("hidden");
            } else {
                member.classList.add("hidden");
            }
            });
        });
        });

        buttons[0].click();
    });
</script>